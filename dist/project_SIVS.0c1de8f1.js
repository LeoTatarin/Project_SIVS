let textarea=document.getElementById("mensage"),btnAdd=document.getElementById("btnAdd"),listaMensagens=document.getElementById("mensagens");textarea.addEventListener("input",function(){btnAdd.disabled=""===textarea.value.trim()}),btnAdd.addEventListener("click",function(){let e=textarea.value.trim();if(""!==e){let t=document.createElement("div");t.classList.add("container","border","rounded","m-0","mb-2"),t.innerHTML=`
            <b>--nome de usuario--</b>
            <p class="mb-0 w-100">${e}</p>
        `,listaMensagens.appendChild(t),textarea.value="",btnAdd.disabled=!0}});let btnAdicionar=document.getElementById("btn-adicionar"),formPeca=document.getElementById("form-peca"),tabela=document.getElementById("tabela-pecas");btnAdicionar&&btnAdicionar.addEventListener("click",()=>{formPeca.style.display="block",btnAdicionar.style.display="none"}),formPeca&&formPeca.addEventListener("submit",e=>{e.preventDefault();let t=document.getElementById("nome").value,n=document.getElementById("quantidade").value,a=document.getElementById("partnumber").value,d=document.createElement("tr");d.innerHTML=`
            <td style="padding:8px;">${t}</td>
            <td style="padding:8px;">${n}</td>
            <td style="padding:8px;">${a}</td>
        `,tabela.appendChild(d),formPeca.reset(),formPeca.style.display="none",btnAdicionar.style.display="block"});let btnArquivo=document.getElementById("btn-arquivo"),formArquivo=document.getElementById("form-arquivo"),tabelaArquivos=document.getElementById("tabela-arquivos");btnArquivo.addEventListener("click",()=>{formArquivo.style.display="block",btnArquivo.style.display="none"}),formArquivo.addEventListener("submit",e=>{e.preventDefault();let t=document.getElementById("fileInput"),n=document.getElementById("descricaoArquivo").value.trim();if(t.files.length>0&&n){let e=t.files[0],a=e.name,d=URL.createObjectURL(e),l=document.createElement("tr");l.innerHTML=`
            <td colspan="5" style="padding:8px;">${a}</td>
            <td colspan="10" style="padding:8px;">${n}</td>
            <td colspan="1" style="padding:8px;">
            <a href="${d}" download="${a}" style="padding:8px;">
            \u{2B07}\u{FE0F}
            </a>
            </td>
        `,tabelaArquivos.appendChild(l),formArquivo.reset(),formArquivo.style.display="none",btnArquivo.style.display="block"}});let btnAssCliente=document.getElementById("btn-ass-cliente"),btnAssCliente2=document.getElementById("btn-ass-cliente2"),formCliente=document.getElementById("form-cliente"),btnSalvarCliente=document.getElementById("btn-salvar-cliente"),btnLimparCliente=document.getElementById("btn-limpar-cliente"),imgCliente=document.getElementById("img-cliente"),canvas=document.getElementById("canvas-cliente"),ctx=canvas.getContext("2d");ctx.lineWidth=2,ctx.lineCap="round",ctx.strokeStyle="#000";let desenhando=!1,assinaturaPendente=null;function iniciar(e){desenhando=!0,ctx.beginPath(),ctx.moveTo(getX(e),getY(e)),e.preventDefault()}function desenhar(e){desenhando&&(ctx.lineTo(getX(e),getY(e)),ctx.stroke(),e.preventDefault())}function parar(){desenhando=!1}function getX(e){return e.touches?e.touches[0].clientX-canvas.getBoundingClientRect().left:e.clientX-canvas.getBoundingClientRect().left}function getY(e){return e.touches?e.touches[0].clientY-canvas.getBoundingClientRect().top:e.clientY-canvas.getBoundingClientRect().top}window.addEventListener("load",()=>{let e=document.getElementById("modal-confirmacao");e&&(e.style.display="none"),assinaturaPendente=null}),btnAssCliente.addEventListener("click",()=>{formCliente.style.display="block",btnAssCliente.style.display="none"}),canvas.addEventListener("mousedown",iniciar),canvas.addEventListener("touchstart",iniciar),canvas.addEventListener("mousemove",desenhar),canvas.addEventListener("touchmove",desenhar),canvas.addEventListener("mouseup",parar),canvas.addEventListener("mouseleave",parar),canvas.addEventListener("touchend",parar),btnLimparCliente.addEventListener("click",()=>{ctx.clearRect(0,0,canvas.width,canvas.height),document.getElementById("nomeCliente").value=""});let camposObrigatorios=[{id:"problema",label:"Problema"},{id:"realizado",label:"Serviço Realizado"},{id:"sos_causa",label:"Causa SOS"},{id:"sos_obs",label:"Observações SOS"},{id:"obs_entrada",label:"Observações de Entrada"},{id:"hora_entrada",label:"Hora de Entrada"},{id:"hora_saida",label:"Hora de Saída"},{id:"tempo_viagem",label:"Tempo de Viagem"},{id:"kms_rodados",label:"KMs Rodados"}],modal=document.getElementById("modal-confirmacao"),modalTexto=document.getElementById("modal-texto"),modalCancelar=document.getElementById("modal-cancelar"),modalConfirmar=document.getElementById("modal-confirmar");function abrirModal(e){let t="Deseja confirmar assinatura?";e.length>0&&(t+="<br>Os seguintes campos não foram preenchidos:<br><ul>"+e.map(e=>`<li>${e}</li>`).join("")+"</ul>"),modalTexto.innerHTML=t,modal.style.display="flex"}function fecharModal(){modal.style.display="none",assinaturaPendente=null}function salvarAssinatura(e,t){imgCliente.src=t,imgCliente.alt="Assinatura de "+e,imgCliente.style.display="block";let n=document.getElementById("info-ass-cliente");n||((n=document.createElement("div")).id="info-ass-cliente",n.style.marginTop="5px",imgCliente.parentElement.appendChild(n));let a=new Date().toLocaleString();n.textContent=`Assinatura de ${e} salva em ${a}`,formCliente.style.display="none",btnAssCliente.disabled=!0,btnAssCliente2.disabled=!0,btnAssCliente.style.display="none",btnAssCliente2.style.display="none",camposObrigatorios.forEach(e=>{let t=document.getElementById(e.id);t&&(t.disabled=!0)});let d=document.getElementById("salvar_os");d&&(d.disabled=!0)}modalCancelar.addEventListener("click",fecharModal),modalConfirmar.addEventListener("click",()=>{assinaturaPendente&&salvarAssinatura(assinaturaPendente.nome,assinaturaPendente.dataURL),fecharModal()}),btnSalvarCliente.addEventListener("click",()=>{let e=document.getElementById("nomeCliente").value.trim();if(!e)return void alert("Digite o nome do responsável!");let t=camposObrigatorios.filter(e=>!document.getElementById(e.id).value.trim()).map(e=>e.label);assinaturaPendente={nome:e,dataURL:canvas.toDataURL()},abrirModal(t)});let btnAssTecnico=document.getElementById("btn-ass-tecnico"),btnAssTecnico2=document.getElementById("btn-ass-tecnico2"),imgTecnico=document.getElementById("img-tecnico");btnAssTecnico.addEventListener("click",()=>{imgTecnico.style.display="block";let e=document.getElementById("info-ass-tecnico");e||((e=document.createElement("div")).id="info-ass-tecnico",e.style.marginTop="5px",imgTecnico.parentElement.appendChild(e));let t=new Date().toLocaleString();e.textContent=`Assinatura do t\xe9cnico registrada em ${t}`,btnAssTecnico.style.display="none",btnAssTecnico2.style.display="none"});
//# sourceMappingURL=project_SIVS.0c1de8f1.js.map
